<!DOCTYPE html ><html><head><title>Introduction to Redux/NGRX</title><meta charset="utf-8"/><meta name="author" content=" Paweł Kaminski, Piotr Staniow"/><meta name="description" content="Redux 101"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"/><link rel="icon" href="../common/img/favicon.ico"/><link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet"/><link rel="stylesheet" href="reveal.js-3.6.0/css/reveal.css"/><link rel="stylesheet" href="reveal.js-3.6.0/css/theme/black.css"/><link rel="stylesheet" href="common.css"/><link rel="stylesheet" href="custom.css"/><!-- Theme used for syntax highlighting of code --><link rel="stylesheet" href="../reveal.js-3.6.0/lib/css/zenburn.css"/><!-- Printing and PDF exports --><script>var link = document.createElement('link');
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match(/print-pdf/gi) ? 'reveal.js-3.6.0/css/print/pdf.css' : 'reveal.js-3.6.0/css/print/paper.css';
document.getElementsByTagName('head')[0].appendChild(link);
</script><style>section.agenda ul {
    list-style: none
    margin: 0
    color: var(--cap-white)
}    




</style></head></html><body><div class="reveal"><div class="slides">       <section id="iteraWro-0" data-transition="none" data-background-color="black"><h2 class="white"></h2><body class="white"><div class="fragment"><img src="img/mgm1.png" style="border:0"/></div></body></section><section id="iteraWro-1" data-transition="none" data-background-color="black"><h2 class="white"></h2><body class="white"><img src="img/mgm2.png" style="border:0"/></body></section><section id="iteraWro-2" data-transition="none" data-background-color="black"><h2 class="white"></h2><body class="white"><img src="img/mgm3.png" style="border:0"/></body></section><section id="title-3" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Angular With NgRx</h2><body class="white"><p class="credits">+ INTRODUCTION TO REDUX ARCHITECTURE</p><p class="credits">Paweł Kamiński</p></body></section><section id="introduction-4" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Let's get know each other</h2><body class="white"><ul><li class="fragment">Angular / Web experience</li><li class="fragment">Why I'm here</li></ul></body></section><section id="agenda-5" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Agenda</h2><body class="white"><ul class="no-bullet"> <li class="fragment"><h3 class="white">Learn</h3><ul>     <li>What is application state?</li><li>What is Redux?</li><li>How to write code with Redux?                                 </li></ul></li><li class="fragment"> <h3 class="white">Build</h3><ul>     <li>Live coding</li></ul></li><li class="fragment"><h3 class="white">Further learning</h3></li><li class="fragment"><h3 class="white">Feedback</h3></li></ul></body></section><section id="agenapplicationstateda-6" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">What is an application state?</h2><body class="white"><h3></h3>All the data that an application needs at given moment:<ul><li class="fragment">To display UI of given structure and content (User Interactions and Input)</li><li class="fragment">To perform some actions (Authentication Tokens)</li><li class="fragment">To provide behaviour persistency (Server Responses)</li></ul></body></section><section id="redux-7" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">What is Redux?</h2><body class="white"><ul><li class="fragment">Simple, reliable and scalable application architecture (e.g. Facebook)</li><li class="fragment">Small set of building blocks used to manage application state</li><li class="fragment">A way of thinking about where to put business logic</li></ul></body></section><section id="principles-8" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Three Principles of Redux</h2><body class="white"><ul><li class="fragment">Single Source of Truth</li><li class="fragment">State is read only</li><li class="fragment">Changes are made with pure functions (i.e. reducers)</li></ul></body></section><section id="glossary-9" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Glossary</h2><body class="white"><ul><li class="fragment">Store - objects which stores our state, and provides mechanism to access it</li><li class="fragment">Reducers - functions to change the state</li><li class="fragment">Action - 'event' to trigger change of the state</li></ul></body></section><section id="schema-10" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">General Redux Schema</h2><body class="white"><img src="img/schema.png"/></body></section><section id="simple-example-11" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Simple Example</h2><body class="white"><a href="https://codepen.io/anon/pen/eKYmoj" target="_blank">Codepen           </a></body></section><section id="demo-12" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Live Coding Session</h2><body class="white"></body></section><section id="demo-step-1-13" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 1</h2><body class="white"><ul><li>Write your first reducer<br/><span class="emp">hint: (State, Action) => State</span></li><li>Add initial, default state to your reducer</li><li>Wire up the reducer with the module using <span class="emp">StoreModule.forRoot method</span> and <span class="emp">ActionReducerMap</span></li></ul></body></section><section id="demo-step-2-14" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 2</h2><body class="white"><p>Use the store to render tasks in :<span class="emp"> TaskBoardComponent<ul><li>Stop using the service in <span class="emp">getData</span></li><li>Fetch all tasks from the store using <span class="emp">select</span> operator,</li><li><span class="emp">Temporarily</span> subscribe to the store and assign them to the existing <span class="emp">tasks#</span>{' '}field</li><li>...</li></ul></span></p></body></section><section id="demo-step-2-15" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 2</h2><body class="white"><ul><li>...</li><li>Map the tasks collection to a filtered one, based on <span class="emp">this.mode (if set) </span></li><li>Write a unit test for your reducer</li></ul><p class="emp">Since we're not relying on internal component state anymore, adding tasks won't work for a while.</p></body></section><section id="demo-step-3-16" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 3</h2><body class="white"><ul><li>Refactor<span class="emp">TaskBoardComponent </span>to use <span class="emp">async</span> instead of subscribing to <span class="emp">tasks$</span></li><li>Extract tasks selection logic to <span class="emp">store/selectors.ts</span> use <span class="emp">createFeatureSelector</span><br/> and <span class="emp">createSelector</span> functions,</li></ul></body></section><section id="demo-step-4-17" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 4</h2><body class="white"><ul><li>Implement <span class="emp">UpdateTask </span>action that will be dispatched when e.g. moving a task </li><li>Handle updating a task in the reducer, use task <span class="emp">id</span> field to find proper one</li><li>Test the reducer</li><li>Dispatch the update action on task move <span class="emp">TaskBoardComponent</span></li></ul></body></section><section id="effects-18" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Redux Schema With Effects</h2><body class="white"><img src="img/schema-effects.png"/></body></section><section id="demo-step-5-19" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 5</h2><body class="white"><ul><li>Add  <span class="emp">TasksService.fetchTasks</span> method that will return task with some delay, to emulate the HTTP request behaviour (use <span class="emp">timer</span>  from rxjs)</li><li>Be sure that <span class="emp">TasksService</span>  returns other tasks than in the default state</li><li>Add <span class="emp">LoadTask</span> and <span class="emp">TasksLoaded</span> actions, handle them in the reducer (add <span class="emp">loading: boolean</span> state)</li></ul></body></section><section id="demo-step-5-20" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 5</h2><body class="white"><ul><li>Write an effect that reloads tasks on <span class="emp">LoadTask</span> action and emits <span class="emp">TasksLoaded</span>  action</li><li>Register the effect with <span class="emp">EffectsModule.forRoot</span></li><li>Add a temporarily fetch button to <span class="emp">TaskBoardComponent</span> that will dispatch <span class="emp">LoadTask</span> action</li></ul></body></section><section id="demo-step-6-21" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 6</h2><body class="white"><ul><li>Implement adding a new task:</li><ul><li>Create <span class="emp">AddTask</span> action</li><li>Handle the action in the reducer</li><li>Dispatch the action in <span class="emp">TaskBoardComponent</span> in appropriate handler</li></ul></ul></body></section><section id="demo-step-7-22" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 7</h2><body class="white"><ul><li>Use loading value from state to show/hide spinner when loading data</li></ul></body></section><section id="demo-step-8-23" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 8</h2><body class="white"><ul><li>Extend  <span class="emp">NgrxModuleState</span> to have router key of type <span class="emp">RouterReducerState<RouterStateUrl></span>  - the <span class="emp">RouterStateUrl</span> was implemented for you in <span class="emp">store/router-store.ts</span></li><li>Import and register  <span class="emp">routerReducer</span>  in your present <span class="emp">ActionReducerMap</span> (suggested key: `router`)</li><li>Wire up <span class="emp">StoreRouterConnectingModule.forRoot({ stateKey: 'router' })</span> with your module</li></ul></body></section><section id="demo-step-9-24" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 9</h2><body class="white"><ul><li>Use router <span class="emp">ROUTER_NAVIGATION</span> to start fetching the data</li><li>Write selector to extract mode from url</li></ul></body></section><section id="demo-step-10-25" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 10</h2><body class="white"><ul><li>Adjust  <span class="emp">TaskBoardComponent</span>  component to use just observables</li><li>Remove fetch button from step 5</li></ul></body></section><section id="demo-step-11-26" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Step 11</h2><body class="white"><ul><li> Adjust selectors</li><li> Fix issue with too often calling fetch data</li><li> Since  <span class="emp">ROUTER_NAVIGATION</span> is used to load data clean initial state in <span class="emp">task-reducer</span> file</li></ul></body></section><section id="missed-27" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">What we have missed</h2><body class="white"><ul><li class="fragment">state normalization</li><li class="fragment">tooling</li><li class="fragment">testing of effects and selectors</li><li class="fragment">alternatives for NgRx</li></ul></body></section><section id="learn-more-28" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Learn more</h2><body class="white"><ul><li> <a href="https://redux.js.org/" target="_blank">redux.js.org</a></li><li><a href="https://ngrx.io/" target="_blank">NgRx Home Page</a></li><li><a href="https://ultimateangular.com/" target="_blank">NgRx State Management - ultimateangular.com</a></li><li> <a href="https://egghead.io/courses/getting-started-with-redux" target="_blank">Getting Started with Redux</a></li><li> <a href="https://www.youtube.com/watch?v=6Z-1v1UnoM8" target="_blank">Todd Motto - Understand NgRx by building a Store - Keynote</a></li></ul></body></section><section id="feedback-29" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white">Feedback</h2><body class="white"></body></section><section id="theend-30" data-transition="slide" data-background-color="rgb(169, 33, 142)"><h2 class="white"></h2><body class="white"><img src="img/theend.png" style="border:0"/></body></section></div></div><script src="reveal.js-3.6.0/lib/js/head.min.js"></script><script src="reveal.js-3.6.0/js/reveal.js"></script><script> Reveal.initialize({
  // controls: true,
 //  progress: true,
   history: true,
 //  center: true,
 //  rollingLinks: true,
//   transition: "convex",
   //- width: "90%",
   //- height: 1.0,
   dependencies: [
     // Syntax highlight for <code> elements
      {
           src: 'reveal.js-3.6.0/lib/js/classList.js', condition: function() {
               return !document.body.classList;
           }
       },
       {
           src: 'reveal.js-3.6.0/plugin/highlight/highlight.js', async: true, callback: function() {
               hljs.initHighlightingOnLoad();
           }
       },
       {src: 'reveal.js-3.6.0/plugin/search/search.js', async: true},
       {src: 'reveal.js-3.6.0/plugin/zoom-js/zoom.js', async: true},
       {src: 'reveal.js-3.6.0/plugin/notes/notes.js', async: true}
   ]
 });</script></body>